{% extends "base.html.twig" %}
{% import "jury/jury_macros.twig" as macros %}

{% block title %}Register Account{% endblock %}

{% block extrahead %}
    {{ parent() }}
    {{ macros.select2_extrahead() }}
    <link rel="stylesheet" href="{{ asset('style_login.css') }}">
{% endblock %}

{% block body %}
    <div class="additional-logins">

        {{ form_start(registration_form, { 'attr': {'class': 'form-signin'} }) }}
        <h1 class="h3 mb-3 font-weight-normal">Register Account</h1>
        <div class="mb-2">
            Enter the following information to register your account with DOMjudge.
        </div>
        {# Form elements will be renderd automatically #}
        {{ form_end(registration_form) }}
    </div>
{% endblock %}

{% block extrafooter %}
    <script>
        $(function () {
            var $affiliation = $('#user_registration_affiliation');

            $affiliation.select2();

            var $affiliationNew = $('[data-id="user_registration_affiliation_new"]');

            if ($affiliation.length && $affiliationNew.length) {
                $affiliation.on('change', function () {
                    var $affiliationNameGroup = $('#user_registration_affiliationName').closest('.form-group');
                    var $affiliationCountryGroup = $('#user_registration_affiliationCountry').closest('.form-group');

                    if ($affiliationNew.is(':selected')) {
                        $affiliationNameGroup.show();
                        $affiliationCountryGroup.show();
                    } else {
                        $affiliationNameGroup.hide();
                        $affiliationCountryGroup.hide();
                    }
                });

                $affiliation.change();
            }
        });
    </script>

    {% include 'jury/partials/country_select.html.twig' with {field: '#user_registration_affiliationCountry'} %}
{% endblock %}
